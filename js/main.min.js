$(document).ready(function(){$("#startdate").datepicker({format:"yyyy-mm-dd"});$("#enddate").datepicker({format:"yyyy-mm-dd"});$("#form_schedule").submit(function(k){$("#form_schedule").find("button").prop("disabled",false);
k.preventDefault();var g=$(this),h={country:String($("#countrySchedule").val()),network:String($("#nOperatorSchedule").val()),amount:String($("#amountSchedule").val()),phonenumber:String($("#phonenumberSchedule").val()),startdate:String($("#startdate").val()),frequency:String($("#frequency").val()),enddate:String($("#enddate").val())},j=[],i=true;
$.each(h,function(l,m){j.push(l+"="+escape(m));if(m.trim().length===0){i=false;}});(i)&&$.post("executeschedule",j.join("&"),function(m){var m=JSON.parse(m),l=$("#form_schedule").find("#alert-container-schedule");
if(m.status==="failure"){l.removeClass("alert-success").addClass("alert-danger").show();}else{if(m.status==="success"){l.removeClass("alert-danger").addClass("alert-success").show();
}}l.html(m.message);$("#form_schedule")[0].reset();$("#form_schedule").find("button").prop("disabled",false);setTimeout(function(){window.location.reload();
},2000);});});$("a.delete-schedule").each(function(){var g=$(this),h=String(g.data("schedule")),i="delete-schedule=true&ref="+escape(h);$(this).click(function(j){j.preventDefault();
$.post("executedelete",i,function(k){k=JSON.parse(k);if(k.status==="success"){window.location.reload();}});});});$("#form_signup").submit(function(k){k.preventDefault();
var g=$(this),h={firstname:String($("#firstname").val()),lastname:String($("#lastname").val()),username:String($("#username").val()),password:String($("#password").val()),email:String($("#email").val()),phonenumber:String($("#phonenumber").val())},j=[],i=true;
$.each(h,function(l,m){j.push(l+"="+escape(m));if(m.trim().length===0){i=false;}});(i)&&$.post("executesignup",j.join("&"),function(m){var m=JSON.parse(m),l=g.find("#alert-container");
if(m.status==="failure"){l.removeClass("alert-success").addClass("alert-danger");}else{if(m.status==="success"){l.removeClass("alert-danger").addClass("alert-success");
}}l.html(m.message);});});$("#form_signin").submit(function(k){k.preventDefault();var g=$(this),h={email:String($("#email").val()),password:String($("#password").val())},j=[],i=true;
$.each(h,function(l,m){j.push(l+"="+escape(m));if(m.trim().length===0){i=false;}});(i)&&$.post("executesignin",j.join("&"),function(m){var m=JSON.parse(m),l=g.find("#alert-container");
if(m.status==="failure"){l.removeClass("alert-success").addClass("alert-danger").html(m.message);}else{if(m.status==="success"){document.location=m.redirect;
}}});});jQuery(function(g){g(".numbersonly").keydown(function(h){if(g.inArray(h.keyCode,[46,8,9,27,13,110,190])!==-1||(h.keyCode==65&&h.ctrlKey===true)||(h.keyCode==67&&h.ctrlKey===true)||(h.keyCode==88&&h.ctrlKey===true)||(h.keyCode>=35&&h.keyCode<=39)){return;
}if((h.shiftKey||(h.keyCode<48||h.keyCode>57))&&(h.keyCode<96||h.keyCode>105)){h.preventDefault();}});g("#payment-form").submit(function(i){g("#loadingdiv").show();
var h=g("#payment-form");h.find("button").prop("disabled",true);Pwc.createToken(h,b);return false;});});var b=function(g,h){if(h.error===true){alert(h.error.message);
}else{var j=h.token,i={buyerID:String($("#buyerID").val()),token:j},k=[];$.each(i,function(l,m){k.push(l+"="+escape(m));});$.post("executecred",k.join("&"),function(m){var m=JSON.parse(m),l=$("#payment-form").find("#alert-container");
if(m.status==="failure"){$("#loadingdiv").hide();l.removeClass("alert-success").addClass("alert-danger").html(m.message);}else{if(m.status==="success"){$("#loadingdiv").hide();
l.removeClass("alert-danger").addClass("alert-success").html(m.message);setTimeout(function(){window.location.href=m.redirect;},2000);}}});}};var a={NGN:{"1":"NG Airtel","2":"NG Etisalat","3":"NG Visafone","4":"NG MTN","5":"NG GLO"},KES:{"6":"KES Airtel","7":"KES Orange","8":"KES Safaricom","9":"KES YU"},GBP:{"10":"UK Orange","11":"UK TMobile","12":"UK Vodafone"},USD:{"13":"US AT&T","14":"US Boost","15":"US TMobile","16":"US UltraMobile","17":"US Verizon"},GHS:{"18":"GH Airtel","19":"GH Expresso","20":"GH GLO","21":"GH MTN","22":"GH Tigo","23":"GH Vodafone"},CAD:{"24":"CA Calldirek"},INR:{"25":"IN Aircel","26":"IN Bharti Airtel","27":"IN Videocon","28":"IN Vodafone"},ZAR:{"29":"SA 8TA","30":"SA CELLC","31":"SA MTN","32":"SA Vodacom"}};
d();$(function(){$("#country").change(function(){$("#nOperator").html("");d();});});function d(){var h=$("#country").val(),g='<option value="" selected disabled>Select Network Operator</option>';
$.each(a,function(j,i){if(h===j){$.each(i,function(k,l){g+='<option value="'+k+'">'+l+"</option>";});}});$("#nOperator").html(g);}function f(g,i){var h="";
$.each(g,function(j,k){h+='<option value="'+k+'">'+k+" "+i+"</option>";});return h;}$(function(){$("#nOperator").change(function(){var g=$(this).val(),h="";
$.each(a,function(k,j){var i=[];if(j.hasOwnProperty(g)){switch(k){case"KES":if(g==="7"){Array.prototype.push.apply(i,[1575,3150]);}else{Array.prototype.push.apply(i,[100,300,600,900,1200,1500,1800]);
}h+='<select class="form-control" name="amount" id="amount" required style="padding: 0;">';h+=f(i,k);h+="</select>";break;case"GBP":if(g==="12"){Array.prototype.push.apply(i,[5,10,20,30,40,50]);
}else{Array.prototype.push.apply(i,[5,10,20]);}h+='<select class="form-control" name="amount" id="amount" required style="padding: 0;">';h+=f(i,k);h+="</select>";
break;default:h+='<input class="form-control" name="amount" id="amount" placeholder="Top-up Amount" required />';break;}}});$("#form_airtime #amount").replaceWith(h);
});});c();$(function(){$("#countrySchedule").change(function(){$("#nOperatorSchedule").html("");c();});});function c(){var h=$("#countrySchedule").val(),g='<option value="" selected disabled>Select Network Operator</option>';
$.each(a,function(j,i){if(h===j){$.each(i,function(k,l){g+='<option value="'+k+'">'+l+"</option>";});}});$("#nOperatorSchedule").html(g);}function e(g,i){var h="";
$.each(g,function(j,k){h+='<option value="'+k+'">'+k+" "+i+"</option>";});return h;}$(function(){$("#nOperatorSchedule").change(function(){var g=$(this).val(),h="";
$.each(a,function(k,j){var i=[];if(j.hasOwnProperty(g)){switch(k){case"KES":if(g==="7"){Array.prototype.push.apply(i,[1575,3150]);}else{Array.prototype.push.apply(i,[100,300,600,900,1200,1500,1800]);
}h+='<select class="form-control" name="amountSchedule" id="amountSchedule" required style="padding: 0;">';h+=f(i,k);h+="</select>";break;case"GBP":if(g==="12"){Array.prototype.push.apply(i,[5,10,20,30,40,50]);
}else{Array.prototype.push.apply(i,[5,10,20]);}h+='<select class="form-control" name="amountSchedule" id="amountSchedule" required style="padding: 0;">';
h+=e(i,k);h+="</select>";break;default:h+='<input class="form-control" name="amountSchedule" id="amountSchedule" placeholder="Top-up Amount" required />';
break;}}});$("#form_schedule #amountSchedule").replaceWith(h);});});$("#form_airtime").submit(function(j){j.preventDefault();var l=function(){return Math.random().toString(16).substr(2);
};var h=function(){return l()+l();};var o=$(this),p=$("#form_airtime").find("#alert-container"),g={country:String($("#country").val()),network:String($("#nOperator").val()),amount:String($("#amount").val()),phonenumber:String($("#phonenumber").val()),token:h()},i=[],m=true;
if(g.amount<100){p.removeClass("alert-success").addClass("alert-danger").html("Please you cannot purchase less than N 100 airtime.").show();}else{$.each(g,function(q,r){i.push(q+"="+escape(r));
if(r.trim().length===0){m=false;}});(m)&&$.post("executebuyairtime",i.join("&"),function(q){console.log(q);});var n="Airtime purchase for "+g.phonenumber;
var k=$("<form>",{method:"post",action:"https://www.paywithcapture.com/live/pay",target:"_top"}).append($("<input>",{name:"merchantid",value:102555,type:"hidden"})).append($("<input>",{name:"amount",value:g.amount*100,type:"hidden"})).append($("<input>",{name:"trxref",value:g.token,type:"hidden"})).append($("<input>",{name:"description",value:n,type:"hidden"}));
k.submit();}});$("#logout").click(function(g){g.preventDefault();$.post("executelogout",null,function(h){var h=JSON.parse(h);document.location=h.redirect;
});});});function changeBG(){var a=$("#cardnumber");var c=$("#cardnumber").val();var b=["51","52","53","54","55"];if(c.charAt(0)==4){a.css("cssText","background-image:url(img/vs.png)");
}else{if(b.indexOf(c.substr(0,2))!=-1){a.css("cssText","background-image:url(img/mc.png)");}else{a.css("cssText","background-image:url(img/rg.png)");}}}