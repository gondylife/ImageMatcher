$(document).ready(function(){function e(){$("#menu ul").hide(),$("#menu ul").children(".current").parent().show(),$("#menu ul:first").show(),$("#menu li a").click(function(){var e=$(this).next();return e.is("ul")&&e.is(":visible")?!1:e.is("ul")&&!e.is(":visible")?($("#menu ul:visible").slideUp("normal"),e.slideDown("normal"),!1):void 0})}$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled")}),$("#menu-toggle-2").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled-2"),$("#menu ul").hide()}),$("#admin-content-div").html($("#personnel-content").html()),$(document).ready(function(){e()}),$("#menu > li#entry-menu-item > a").click(function(e){$("li#personnel-menu-item").removeClass("active"),$("li#entry-menu-item").addClass("active"),$("#admin-content-div").html($("#entry-content").html())}),$("#menu > li#personnel-menu-item > a").click(function(e){$("li#entry-menu-item").removeClass("active"),$("li#personnel-menu-item").addClass("active"),$("#admin-content-div").html($("#personnel-content").html())}),$("#form_newpersonnel").submit(function(e){e.preventDefault();var n=($(this),{firstname:String($("#firstname").val()),lastname:String($("#lastname").val()),policeid:String($("#policeid").val()),emailaddress:String($("#emailaddress").val()),role:String($("#role").val())}),t=[],a=!0;$.each(n,function(e,n){t.push(e+"="+escape(n)),0===n.trim().length&&(a=!1)}),a&&$.post("executenewpersonnel",t.join("&"),function(e){var e=JSON.parse(e);console.log(e)})}),$(".login-input").on("focus",function(){$(".login").addClass("focused")}),$("#form_login").submit(function(e){e.preventDefault(),$(".login").removeClass("focused").addClass("loading");var n=($(this),{policeid:String($("#policeid").val()),secret:String($("#secret").val())}),t=[],a=!0;$.each(n,function(e,n){t.push(e+"="+escape(n)),0===n.trim().length&&(a=!1)}),a&&$.post("executelogin",t.join("&"),function(e){var e=JSON.parse(e),n=$("#login-alert-container");"failure"===e.status?($(".login").removeClass("loading"),n.append('<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>'),n.removeClass("alert-success").addClass("alert-danger").html(e.message)):"success"===e.status&&($(".login").removeClass("loading"),document.location=e.redirect),console.log(e)})}),$("button.deactivate-personnel").each(function(){var e=$(this),n=String(e.data("personnel")),t="deactivate-personnel=true&ref="+escape(n);$(this).click(function(e){e.preventDefault(),$.post("executepersonnel",t,function(e){e=JSON.parse(e),console.log(e)})})}),$("button.activate-personnel").each(function(){var e=$(this),n=String(e.data("personnel")),t="activate-personnel=true&ref="+escape(n);$(this).click(function(e){e.preventDefault(),$.post("executepersonnel",t,function(e){e=JSON.parse(e),console.log(e)})})}),$("button.delete-personnel").each(function(){var e=$(this),n=String(e.data("personnel")),t="delete-personnel=true&ref="+escape(n);$(this).click(function(e){e.preventDefault(),$.post("executepersonnel",t,function(e){e=JSON.parse(e),console.log(e)})})}),$("#form_newentry").submit(function(e){e.preventDefault();var n=($(this),{firstname:String($("#firstname").val()),lastname:String($("#lastname").val()),othername:String($("#othername").val()),dob:String($("#dob").val()),sex:String($("#sex").val()),phonenumber:String($("#phonenumber").val()),emailaddress:String($("#emailaddress").val()),homeaddress:String($("#homeaddress").val()),occupation:String($("#occupation").val()),workplace:String($("#workplace").val()),workaddress:String($("#workaddress").val()),image1:String($("#image1").val()),image2:String($("#image2").val())}),t=[],a=!0;$.each(n,function(e,n){t.push(e+"="+escape(n)),0===n.trim().length&&(a=!1)}),a&&$.post("executenewentry",t.join("&"),function(e){var e=JSON.parse(e);console.log(e)})}),$("button.edit-entry").each(function(){var e=$(this),n=String(e.data("entry")),t="edit-entry=true&ref="+escape(n);$(this).click(function(e){e.preventDefault(),$.post("executeeditentry",t,function(e){e=JSON.parse(e),$('#form_editentry input[name="othername"]').val(e.Othername),$('#form_editentry input[name="dob"]').val(e.DOB),$('#form_editentry input[name="phonenumber"]').val(e.Phonenumber),$('#form_editentry input[name="emailaddress"]').val(e.EmailAddress),$('#form_editentry input[name="homeaddress"]').val(e.HomeAddress),$('#form_editentry input[name="occupation"]').val(e.Occupation),$('#form_editentry input[name="workplace"]').val(e.WorkPlace),$('#form_editentry input[name="workaddress"]').val(e.WorkAddress),$("#form_editentry button").attr("data-id",e.UniqueID)})})}),$("#form_editentry").submit(function(e){e.preventDefault();var n=($(this),String($("#form_editentry button").data("id"))),t={othername:String($("#othername").val()),dob:String($("#dob").val()),phonenumber:String($("#phonenumber").val()),emailaddress:String($("#emailaddress").val()),homeaddress:String($("#homeaddress").val()),occupation:String($("#occupation").val()),workplace:String($("#workplace").val()),workaddress:String($("#workaddress").val()),id:escape(n)},a=[],i=!0;$.each(t,function(e,n){a.push(e+"="+escape(n)),0===n.trim().length&&(i=!1)}),i&&$.post("executeeditentry",a.join("&"),function(e){var e=JSON.parse(e);console.log(e)})}),$("button.train-album").each(function(){var e=$(this),n=String(e.data("entry"));$(this).click(function(e){e.preventDefault(),$("#form_trainalbum").append('<input type="hidden" class="entryid" name="entryid" value="'+n+'" />')})});var n=10,t=$(".imageurl_fields"),a=$(".addimage_field"),i=1;$(a).click(function(e){e.preventDefault(),n>i&&(i++,$(t).append('<div><input type="text" placeholder="Image URL" class="imageurlfield" name="imageURL[]" /><a href="#" class="removeimage_field">Remove</a></div>'))}),$(t).on("click",".removeimage_field",function(e){e.preventDefault(),$(this).parent("div").remove(),i--}),$("#form_trainalbum").submit(function(e){e.preventDefault();var n=($(this),[]),t={},a=!0;$.each($('#form_trainalbum input[class="imageurlfield"]'),function(){n.push(escape($(this).val())),0===$(this).val().trim().length&&(a=!1)}),t.id=String($('#form_trainalbum input[name="entryid"]').val()),t.dataset=n,a&&$.post("executetrain",JSON.stringify(t),function(e){var e=JSON.parse(e);console.log(e)})})});